var tradingApp=angular.module("tradingApp",["ui.router","gridshore.c3js.chart"]);tradingApp.config(["$stateProvider",function(n){n.state({name:"index",url:"/"});n.state({name:"ranking",url:"/ranking",templateUrl:"app/ranking/ranking.html",controller:"rankingCtrl"});n.state({name:"charts",url:"/charts",templateUrl:"app/charts/charts.html",controller:"chartsCtrl"});n.state({name:"all",url:"/all",templateUrl:"app/ranking/ranking.html",controller:"allCtrl"});n.state({name:"portfolio",url:"/portfolio",templateUrl:"app/portfolio/portfolio.html"})}]);tradingApp.run(["$state",function(n){n.transitionTo("index")}]);tradingApp.factory("tradingSvc",["$http",function(n){return{ranking:function(t){var i="api/ranking/";return t!==null&&(i+=t.getFullYear()+"-"+t.getMonth()+"-01"),n.get(i)},all:function(t){var i="api/allranking/";return t!==null&&(i+=t.getFullYear()+"-"+t.getMonth()+"-01"),n.get(i)},portfolio:function(){return n.get("api/portfolio/")},charts:function(){return n.get("api/charts/")}}}]);tradingApp.controller("allCtrl",["$scope","tradingSvc",function(n,t){function i(n,t){return new Date(n.getFullYear(),n.getMonth()+t,1)}var r=this;n.ranking=function(r){n.loading=!0;r==null&&(r=i(new Date,1));t.all(r).success(function(t){n.etfs=t;n.dataRif=r;n.dataPrecedente=i(r,-1);n.dataSuccessiva=i(r,1);n.loading=!1})};n.title="Ranking (All ETFs)";n.ranking();n.meseAnnoPrecedente=function(){if(n.dataPrecedente!=null)return n.dataPrecedente.toLocaleDateString()};n.meseAnnoSuccessivo=function(){if(n.dataSuccessiva!=null)return n.dataSuccessiva.toLocaleDateString()};n.meseAnnoCorrente=function(){if(n.dataRif!=null)return n.dataRif.toLocaleDateString()}}]);tradingApp.controller("rankingCtrl",["$scope","tradingSvc",function(n,t){function i(n,t){return new Date(n.getFullYear(),n.getMonth()+t,1)}var r=this;n.ranking=function(r){n.loading=!0;r==null&&(r=i(new Date,1));t.ranking(r).success(function(t){n.etfs=t;n.dataRif=r;n.dataPrecedente=i(r,-1);n.dataSuccessiva=i(r,1);n.loading=!1})};n.title="Ranking";n.ranking();n.meseAnnoPrecedente=function(){if(n.dataPrecedente!=null)return n.dataPrecedente.toLocaleDateString()};n.meseAnnoSuccessivo=function(){if(n.dataSuccessiva!=null)return n.dataSuccessiva.toLocaleDateString()};n.meseAnnoCorrente=function(){if(n.dataRif!==null)return n.dataRif.toLocaleDateString()}}]);tradingApp.controller("chartsCtrl",["$scope","tradingSvc",function(n,t){n.loading=!0;t.charts().success(function(t){n.etfs=t;n.loading=!1})}]);tradingApp.controller("portfolioCtrl",["$scope","tradingSvc",function(n,t){n.load=function(){n.loading=!0;t.portfolio().success(function(t){n.portfolio=t;n.loading=!1})};n.load()}]);